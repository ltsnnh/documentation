# W25Q32 32M-bit Serial NOR Flash

## Summary

### Overview

- Model: [W25Q32][W25Q32FV.PDF]
- Type: Serial NOR Flash
- Capacity: 32 Mbit = 4 MB
- Interface: SPI / Dual SPI / Quad SPI
- Operating voltage: 2.7V – 3.6V
- Common packages: SOIC-8, WSON-8, TSSOP-8…

<p align="center">
    <img src="https://files.catbox.moe/0xu6nk.png" width="512"><br>
    Pin Configuration SOIC / VSOP 208-mil
</p>

| PIN NO. | PIN NAME | I/O | FUNCTION |
| :---: | :---: | :---: | :--- |
| 1 | /CS | I | Chip Select Input |
| 2 | DO (IO1) | I/O | Data Output (Data Input Output 1) |
| 3 | /WP (IO2) | I/O | Write Protect Input ( Data Input Output 2) |
| 4 | GND | - | Ground |
| 5 | DI (IO0) | I/O | Data Input (Data Input Output 0) |
| 6 | CLK | I | Serial Clock Input |
| 7 | /HOLD or /RESET (IO3) | I/O | Hold or Reset Input (Data Input Output 3) |
| 8 | VCC | - | Power Supply |

### Key Features

- High read performance with Dual/Quad SPI.
- Supports XIP (Execute In Place).
- Unique 64-bit ID for each chip.
- Three Security Registers, each 256 bytes (can be permanently locked).
- JEDEC ID + SFDP support.

### OverviewElectrical Characteristics

| Item                  | Value                             |
| --------------------- | --------------------------------- |
| Operating voltage     | **2.7V – 3.6V**                   |
| Standby current       | ~**5 µA**                         |
| Read/active current   | **~4 – 20 mA** depending on speed |
| Operating temperature | −40°C to +85°C                    |

### SPI Interface

#### SPI Clock Frequency

- Standard SPI: up to 104 MHz
- Dual SPI: 104 MHz x 2 effective
- Quad SPI: 104 MHz x 4 MHz effective

#### Supported Modes

- Standard SPI (SIO0, SIO1)
- Dual I/O mode (2-bit)
- Quad I/O mode (4-bit)
- Supports Fast Read, Dual Read, Quad Read…

### Memory Organization

<p align="center">
    <img src="https://files.catbox.moe/dbq0np.png" width="512"><br>
    W25Q32 Serial Flash Memory Block Diagram
</p>

W25Q32 uses a typical NOR-Flash structure:

| Type                | Size              |
| --------------------| ----------------- |
| Page                | **256 bytes**     |
| Sector (Page x 16)  | **4 KB**          |
| Block (Sector x 16) | **64 KB**         |
| Total sectors       | **1024**          |
| Total 64 KB blocks  | **64**            |

#### Write operation

- Page size: 256 bytes per write
- Must erase before rewriting data into a non-empty page

#### Erase commands

- 4 KB Sector Erase
- 32 KB Block Erase
- 64 KB Block Erase
- Chip Erase

### Performance / Timing

| Operation           | Typical Timing    |
| ------------------- | ----------------- |
| Page Program (256B) | **0.7–3 ms**      |
| 4 KB Sector Erase   | **~50–150 ms**    |
| 64 KB Block Erase   | **~150–400 ms**   |
| Chip Erase          | **10–20 seconds** |

### Important Registers

#### Status Registers

- SR1: WIP, WEL, BP bits
- SR2: QE (Quad Enable), security bits
- SR3: Output driver strength, Hold/Reset config

#### Security Registers

- 3 registers × 256 bytes
- Can be permanently locked (OTP)

### Typical Applications

- MCU firmware storage
- SPIFFS / LittleFS / FAT filesystems (ESP32 / STM32)
- Bootloaders for ARM / RISC-V
- Storing configuration or log data
- Code shadowing (copy code into RAM for fast execution)

### Pros and Cons

#### Advantages

- Very high read speed (suitable for XIP)
- SPI requires few I/O pins
- High endurance (100,000 erase cycles)

#### Drawbacks

- Must erase before writing
- Erase slower than NAND Flash
- Does not write byte by byte like EEPROM (writes only by PAGE)

## SPI Operations

### Standard SPI Instructions

Accessed through an SPI compatible bus consisting of four signals:
- Serial Clock (CLK)
- Chip Select (/CS)
- Serial Data Input (DI)
- Serial Data Output (DO)

**DI**: write instructions, addresses or data to the device on the rising edge of CLK.  
**DO**: read data or status from the device on the falling edge of CLK.  
SPI bus operation **Mode 0 (0,0) and 3 (1,1)** are supported.

### Hold Function

- **/HOLD** allows the SPI operation to be *paused* while the chip is selected (/CS = low).
- It works only in **Standard SPI** and **Dual SPI**, and is not available in Quad SPI or QPI modes.
- The **QE** (Quad Enable) bit in Status Register-2 determines the pin function:
    - QE = 0 - the pin acts as /HOLD (default)
    - QE = 1 - the pin becomes an I/O pin, and /HOLD is disabled

#### When /HOLD is useful

When the SPI bus is shared with other devices.  
Example: A page is partially programmed and a high-priority interrupt needs the SPI bus - /HOLD preserves the current instruction and buffer so programming can resume later.

#### How /HOLD is activated

1. /CS must be low (device selected).
2. A **falling edge** on /HOLD starts the hold condition if **CLK is low**; otherwise, it starts after the next falling edge of CLK.
3. The hold condition ends on the **rising edge** of /HOLD under the same rules.

#### Behavior during /HOLD

- DO becomes high-impedance.
- DI and CLK are ignored (no data is received).
- /CS must remain low during the entire hold period, otherwise the device resets its internal logic state.

### Write Protection

#### Features

- Reset when VCC is below threshold (VWI)
- Write disable delay after power-up (tPUW)
- Write Enable/Disable instructions, with automatic disable after program/erase
- Software and hardware write protection (via Status Registers + /WP pin)
- Individual Block/Sector Locks for per-sector or per-block protection
- Write protection during Power-down mode (all instructions ignored except Release Power-down)
- Lock-Down protection for Status Registers until next power-up
- OTP (One-Time Program) protection for memory array and Security Registers (special order feature)

#### Power-up / Power-down Behavior

After power-up:
- The device becomes write-disabled.
- WEL = 0 (Write Enable Latch cleared).
- A Write Enable instruction is required before any Program/Erase/Write-Status instruction.

After finishing any program/erase/write instruction:
- WEL is automatically cleared (write disabled again).

#### Software Write Protection

Controlled using Status Register bits:
- SRP0, SRP1 - Status Register protection
- CMP, SEC, TB, BP[2:0] - Array block/sector protection
These allow part or all of the memory array to be set as read-only.

Using /WP pin:
- /WP can enable or disable changes to the Status Registers (hardware protection).

Power-down mode:
- All commands ignored except Release Power-down, which adds another level of write protection.

#### Individual Block Locks (sector/block-level protection)

- Each 64 KB block (except top/bottom blocks) and each 4 KB sector in the top/bottom blocks has an Individual Block Lock bit.
- Lock bit = 0 - block/sector can be programmed or erased
- Lock bit = 1 - program/erase commands are ignored

At power-up:
- All lock bits = 1, so the entire memory is protected.
- To unlock a specific sector or block, use Individual Block Unlock (39h).

#### Selecting the Protection Scheme (WPS bit)

The WPS bit in Status Register-3 sets the protection mode:
- WPS = 0 (default) - Use the BP/CMP/SEC/TB protection scheme
- WPS = 1 - Use the Individual Block Lock protection scheme

## Status and Configuration Registers

<p align="center">
    <img src="https://files.catbox.moe/ebhbhb.png" width="512"><br>
    Status Register 1 - write/erase status + memory protection
</p>

| Bit   | Name | Description                                                     |
| ----- | ---- | --------------------------------------------------------------- |
| **7** | SRP0 | Status Register write-protect bit (works with SRP1 and /WP pin) |
| **6** | SEC  | Sector protect mode for 4-KB sectors                            |
| **5** | TB   | Top/Bottom protect selection                                    |
| **4** | BP2  | Block Protect bit                                               |
| **3** | BP1  | Block Protect bit                                               |
| **2** | BP0  | Block Protect bit                                               |
| **1** | WEL  | Write Enable Latch (must be 1 before program/erase)             |
| **0** | BUSY | 1 = device busy (program/erase), 0 = ready                      |

<p align="center">
    <img src="https://files.catbox.moe/gwdaw9.png" width="512"><br>
    Status Register 2 - Quad-SPI enable + advanced protection
</p>

| Bit    | Name     | Description                                      |
| ------ | -------- | ------------------------------------------------ |
| **1**  | QE       | Quad Enable bit (enables 4-bit I/O mode)         |
| **0**  | SRP1     | Status Register protection bit (works with SRP0) |
| Others | Reserved | Not used                                         |

<p align="center">
    <img src="https://files.catbox.moe/nje2qi.png" width="512"><br>
    Status Register 3 - choose protection scheme and extra config
</p>

| Bit    | Name     | Description                                                          |
| ------ | -------- | -------------------------------------------------------------------- |
| **2**  | WPS      | Write Protect Scheme select: 0 = BP bits, 1 = Individual Block Locks |
| Others | Reserved | Not used / manufacturer reserved                                     |

## Instructions

### SPI Instruction Set

- Modes supported: Standard, Dual, Quad SPI
- Total instructions: 45 basic instructions
- **Instruction initiation**: Falling edge of Chip Select (/CS)
- Instruction code: First byte clocked into DI input
- **Data sampling**: On rising edge of CLK, MSB first
- Instruction length: 1 byte to several bytes (may include address, data, or dummy bytes)
- **Instruction completion**: Rising edge of /CS
- Write/Program/Erase rules: Must **complete on byte boundary** (/CS high after full 8 bits) to avoid accidental writes
- Protection: During Program/Erase or Status Register write, all instructions except Read Status Register are ignored

For details, see [Reference Manual - Section 8. INSTRUCTIONS][W25Q32FV.PDF]


[W25Q32FV.PDF]: <https://www.alldatasheet.com/datasheet-pdf/pdf/555292/WINBOND/W25Q32FV.html> "3V 32M-BIT SERIAL FLASH MEMORY WITH DUAL/QUAD SPI & QPI"
